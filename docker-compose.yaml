version: "3.8"

services:
  8311-ha-bridge:
    container_name: 8311-ha-bridge
    build: .
    restart: unless-stopped
    environment:
      # WAS-110 Device Settings
      - WAS_110_HOST=${WAS_110_HOST}
      - WAS_110_USER=${WAS_110_USER}
      - WAS_110_PORT=${WAS_110_PORT}
      - WAS_110_PASS=${WAS_110_PASS}
      # MQTT Broker
      - HA_MQTT_BROKER=${HA_MQTT_BROKER}
      - HA_MQTT_PORT=${HA_MQTT_PORT}
      - HA_MQTT_USER=${HA_MQTT_USER}
      - HA_MQTT_PASS=${HA_MQTT_PASS}
      - MQTT_CLIENT_ID=${MQTT_CLIENT_ID}
      # Home Assistant Discovery
      - HA_DISCOVERY_PREFIX=${HA_DISCOVERY_PREFIX}
      - HA_ENTITY_BASE=${HA_ENTITY_BASE}
      # Script Operation
      - POLL_INTERVAL_SECONDS=${POLL_INTERVAL_SECONDS}
      - SSH_TIMEOUT_SECONDS=${SSH_TIMEOUT_SECONDS}
      - DEBUG_MODE=${DEBUG_MODE}
      - TEST_MODE=${TEST_MODE}
      - PING_ENABLED=${PING_ENABLED}
      # Reconnection Delays
      - RECONNECT_DELAY_1=${RECONNECT_DELAY_1}
      - RECONNECT_DELAY_2=${RECONNECT_DELAY_2}
      - RECONNECT_DELAY_3=${RECONNECT_DELAY_3}
      - RECONNECT_DELAY_4=${RECONNECT_DELAY_4}
    volumes:
      - /etc/localtime:/etc/localtime:ro
      # Uncomment below to mount SSH keys if needed
      # - ./ssh_keys:/root/.ssh:ro
